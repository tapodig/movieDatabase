-- Script was generated by Devart Entity Developer, Version 7.1.134.0
-- Script date 2023. 04. 26. 20:04:18
-- Target Server: SQL Server
-- Server Version: 2019

-- 
-- Creating a table bdo.Streaming 
-- 
CREATE TABLE bdo.Streaming (
   streaming_id INT NOT NULL IDENTITY,
   streaming_name NVARCHAR(20) NOT NULL,
   CONSTRAINT PK_Streaming PRIMARY KEY (streaming_id)
)
GO

-- 
-- Creating a table bdo.Reviewer 
-- 
CREATE TABLE bdo.Reviewer (
   rev_id INT NOT NULL IDENTITY,
   rev_name NVARCHAR(30) NOT NULL,
   CONSTRAINT PK_Reviewer PRIMARY KEY (rev_id)
)
GO

-- 
-- Creating a table bdo.Genres 
-- 
CREATE TABLE bdo.Genres (
   gen_id INT NOT NULL IDENTITY,
   gen_title NVARCHAR(20) NOT NULL,
   CONSTRAINT PK_Genres PRIMARY KEY (gen_id)
)
GO

-- 
-- Creating a table bdo.Director 
-- 
CREATE TABLE bdo.Director (
   dir_id INT NOT NULL IDENTITY,
   dir_fname NVARCHAR(20) NOT NULL,
   dir_lname NVARCHAR(20) NOT NULL,
   CONSTRAINT PK_Director PRIMARY KEY (dir_id)
)
GO

-- 
-- Creating a table bdo.Actor 
-- 
CREATE TABLE bdo.Actor (
   act_id INT NOT NULL IDENTITY,
   act_fname NVARCHAR(20) NOT NULL,
   act_lname NVARCHAR(20) NOT NULL,
   act_gender NVARCHAR(1) NOT NULL,
   CONSTRAINT PK_Actor PRIMARY KEY (act_id)
)
GO

-- 
-- Creating a table bdo.Movie 
-- 
CREATE TABLE bdo.Movie (
   mov_id INT NOT NULL IDENTITY,
   mov_title NVARCHAR(50) NOT NULL,
   mov_description NVARCHAR(255) NOT NULL,
   move_year INT NOT NULL,
   mov_time INT NOT NULL,
   mov_lang NVARCHAR(50) NOT NULL,
   mov_dt_rel DATETIME2 NOT NULL,
   mov_rel_country NVARCHAR(5) NOT NULL,
   mov_trailer NVARCHAR(4000) NOT NULL DEFAULT 255,
   mov_pic NVARCHAR(255) NOT NULL,
   CONSTRAINT PK_Movie PRIMARY KEY (mov_id)
)
GO

-- 
-- Creating a table bdo.Movie_Streaming 
-- 
CREATE TABLE bdo.Movie_Streaming (
   id INT NOT NULL IDENTITY,
   mov_id INT NOT NULL,
   streaming_id INT NOT NULL,
   CONSTRAINT PK_Movie_Streaming PRIMARY KEY (id),
   CONSTRAINT FK_Movie_Streaming_Streaming_0 FOREIGN KEY (streaming_id) REFERENCES bdo.Streaming (streaming_id),
   CONSTRAINT FK_Movie_Streaming_Movie_1 FOREIGN KEY (mov_id) REFERENCES bdo.Movie (mov_id)
)
GO

-- 
-- Creating a table bdo.Rating 
-- 
CREATE TABLE bdo.Rating (
   id INT NOT NULL IDENTITY,
   mov_id INT NOT NULL,
   rev_id INT NOT NULL,
   rev_stars INT NOT NULL,
   num_o_ratings INT NOT NULL,
   CONSTRAINT PK_Rating PRIMARY KEY (id),
   CONSTRAINT FK_Rating_Reviewer_0 FOREIGN KEY (rev_id) REFERENCES bdo.Reviewer (rev_id),
   CONSTRAINT FK_Rating_Movie_1 FOREIGN KEY (mov_id) REFERENCES bdo.Movie (mov_id)
)
GO

-- 
-- Creating a table bdo.Movie_Cast 
-- 
CREATE TABLE bdo.Movie_Cast (
   id INT NOT NULL IDENTITY,
   act_id INT NOT NULL,
   mov_id INT NOT NULL,
   role NVARCHAR(30) NOT NULL,
   CONSTRAINT PK_Movie_Cast PRIMARY KEY (id),
   CONSTRAINT FK_Movie_Cast_Actor_0 FOREIGN KEY (act_id) REFERENCES bdo.Actor (act_id),
   CONSTRAINT FK_Movie_Cast_Movie_1 FOREIGN KEY (mov_id) REFERENCES bdo.Movie (mov_id)
)
GO

-- 
-- Creating a table bdo.Movie_Direction 
-- 
CREATE TABLE bdo.Movie_Direction (
   id INT NOT NULL IDENTITY,
   dir_id INT NOT NULL,
   mov_id INT NOT NULL,
   CONSTRAINT PK_Movie_Direction PRIMARY KEY (id),
   CONSTRAINT FK_Movie_Direction_Director_0 FOREIGN KEY (dir_id) REFERENCES bdo.Director (dir_id),
   CONSTRAINT FK_Movie_Direction_Movie_1 FOREIGN KEY (mov_id) REFERENCES bdo.Movie (mov_id)
)
GO

-- 
-- Creating a table bdo.Movie_Genres 
-- 
CREATE TABLE bdo.Movie_Genres (
   id INT NOT NULL IDENTITY,
   mov_id INT NOT NULL,
   gen_id INT NOT NULL,
   CONSTRAINT PK_Movie_Genres PRIMARY KEY (id),
   CONSTRAINT FK_Movie_Genres_Genres_0 FOREIGN KEY (gen_id) REFERENCES bdo.Genres (gen_id),
   CONSTRAINT FK_Movie_Genres_Movie_1 FOREIGN KEY (mov_id) REFERENCES bdo.Movie (mov_id)
)
GO

